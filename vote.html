<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style>

.villages {
  stroke: #888;
  stroke-width: .5px;
  stroke-opacity: .5;
}


body{
  background:#eee;
}


</style>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<!-- Kernel JS -->
<script src="twmap.js"></script>
<!-- Application JS -->
<script src="vote.js"></script>
<script src="bluegreen.js"></script>
<div id="info2" style="position: absolute; left: 600px; top: 0px">2012 總統大選鄉鎮圖</div>
<div id="info" style="position: absolute; right: 5px; top: 0px;width:400px:border:1px outset #eee;margin:5px"></div>
<script><!--

var global_data = {};
if (!window.location.hash)
{
    twmap('county.json', 'county.json', 'count.csv', {
        init_data: bluegreen_init_data,
        style_cb: bluegreen_style_cb,
        mouseover_cb: bluegreen_mouseover_cb
    });
}else{
  var hash = window.location.hash; 
  console.log(hash.substr(1)+"");
  $.get(
  'https://www.google.com/fusiontables/api/query/?jsonCallback=?&sql=' + encodeURIComponent('SELECT * FROM '+hash.substr(1)), 
  handleData, 'jsonp'); 

}



function handleData(data)
{
	global_data = data;
		console.log(data);
		twmap('town.json', 'county.json', 'count.csv', {
    			init_data: test_init_data,
    			style_cb: test_style_cb,
    			mouseover_cb: test_mouseover_cb
			});

}

//--></script>
</body>
</html>
